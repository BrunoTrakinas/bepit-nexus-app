[build]
  base    = "rosto-do-robo"
  command = "npm run build"
  publish = "rosto-do-robo/dist"

# Proxy de API: o backend PRECISA expor as rotas com prefixo /api
[[redirects]]
  from = "/api/*"
  to   = "https://bepit-nexus-backend.onrender.com/api/:splat"
  status = 200
  force = true

# IMPORTANTÍSSIMO: não redirecionar /admin/* para o backend.
# Deixe o SPA router cuidar dessas rotas no Netlify.

# SPA fallback
[[redirects]]
  from = "/*"
  to   = "/index.html"
  status = 200
# (Opcional) Melhorar cache dos assets gerados pelo Vite

[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"